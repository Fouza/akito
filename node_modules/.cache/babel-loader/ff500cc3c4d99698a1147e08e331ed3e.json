{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\THINKPAD L480\\\\Desktop\\\\Work\\\\akito\\\\src\\\\components\\\\Login.tsx\";\nimport React, { useState } from \"react\";\nimport { IonCard, IonCardHeader, IonCardContent, IonContent, IonGrid, IonRow, IonCol, IonItem, IonInput, IonList, IonButton, IonText, IonAlert, IonLabel, isPlatform } from \"@ionic/react\";\nimport { useForm } from \"react-hook-form\";\nimport \"./login-register.css\";\nimport axios from \"axios\";\n\nconst Login = () => {\n  const [email, setEmail] = useState();\n  const [username, setUsername] = useState();\n  const [usernameReg, setUsernameReg] = useState();\n  const [pwd, setPwd] = useState();\n  const [pwdReg, setPwdReg] = useState();\n  const [change, setChange] = useState(false);\n  const [alert, setAlert] = useState(false);\n  const [message, setMessage] = useState(\"Inscription avec succès\");\n  const [isError, setIsError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\"); //const history = createHashHistory();\n  // validation forms\n\n  let initialValues = {\n    pseudo: \"\",\n    email: \"\"\n  };\n  const {\n    control,\n    handleSubmit,\n    formState,\n    reset,\n    errors\n  } = useForm({\n    defaultValues: { ...initialValues\n    },\n    mode: \"onChange\"\n  });\n\n  const showError = _fieldName => {\n    let error = errors[_fieldName];\n    return error ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: \"red\",\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, error.message || \"Field Is Required\") : null;\n  };\n\n  function cnx() {\n    setChange(false);\n  }\n\n  function inscr() {\n    setChange(true);\n  }\n\n  async function hasProfile(id, token) {\n    let config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Headers\": \"*\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    };\n    await axios.get(`http://3d621b285293.ngrok.io/api/service/user/hasProfile/${id}`, config).then(res => {\n      if (res.data) {\n        localStorage.setItem(\"fitnessExist\", \"true\");\n        window.location.replace(\"/page/Accueil\");\n      } else {\n        localStorage.setItem(\"fitnessExist\", \"false\");\n\n        if (!isPlatform(\"desktop\")) {\n          window.location.replace(\"/stepper\");\n        } else {\n          window.location.replace(\"page/Profile\");\n        }\n      } // window.location.replace(\"/stepper\");\n\n    }).catch(err => console.log(err));\n  }\n\n  async function connectRequest() {\n    await axios.post(\"http://3d621b285293.ngrok.io/api/auth/signin\", {\n      username: username,\n      password: pwd\n    }, {\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Headers\": \"*\"\n      }\n    }).then(res => {\n      if (res.data.id) {\n        localStorage.setItem(\"token\", res.data.accessToken);\n        localStorage.setItem(\"roles\", JSON.stringify(res.data.roles));\n        localStorage.setItem(\"id\", res.data.id);\n        localStorage.setItem(\"connected\", \"true\");\n        localStorage.setItem(\"username\", res.data.username);\n        localStorage.setItem(\"email\", res.data.email);\n        hasProfile(res.data.id, res.data.accessToken);\n      }\n    }).catch(err => {\n      // console.log(err.response.data.message);\n      // setMessage(err.response.data.message);\n      // setAlert(true);\n      if (err.response.status === 401) {\n        setErrorMessage(\"Identifiant ou mot de passe erroné\");\n      } else if (err.response.status === 500) {\n        setErrorMessage(\"Connexion impossible\");\n      }\n\n      setIsError(true);\n    });\n  }\n\n  async function registerRequest() {\n    await axios.post(\"http://3d621b285293.ngrok.io/api/auth/signup\", {\n      username: usernameReg,\n      password: pwdReg,\n      email: email,\n      role: [\"ROLE_USER\"]\n    }, {\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Headers\": \"Origin, Content-Type, Accept\",\n        \"Content-type\": \"application/json\"\n      }\n    }).then(res => {\n      //setChange(false);\n      setMessage(\"Inscription avec succès\");\n      setAlert(true); //window.location.reload();\n    }).catch(err => {\n      // console.log(err.response.data);\n      // //setMessage(err.response.data.errors[0].defaultMessage);\n      // setAlert(true);\n      if (err.response.status === 500) {\n        setMessage(\"Veuillez remplir les champs correctement\");\n      } else {\n        setMessage(\"Impossible de s'inscrire\");\n      }\n\n      setAlert(true);\n    });\n  }\n\n  function connect() {\n    connectRequest();\n  }\n\n  function register() {\n    registerRequest();\n  }\n\n  if (change) {\n    return /*#__PURE__*/React.createElement(IonContent, {\n      class: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(IonAlert, {\n      isOpen: alert,\n      onDidDismiss: () => setAlert(false),\n      header: \"Alert\" //ubHeader={\"Inscription avec succès\"}\n      ,\n      message: message,\n      buttons: [\"OK\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(IonAlert, {\n      isOpen: alert,\n      onDidDismiss: () => setAlert(false),\n      header: \"Alert\" //ubHeader={\"Inscription avec succès\"}\n      ,\n      message: message,\n      buttons: [\"OK\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(IonGrid, {\n      class: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IonRow, {\n      class: \"ion-justify-content-center ion-align-items-center form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IonCol, {\n      sizeXs: \"10\",\n      sizeSm: \"10\",\n      sizeMd: \"6\",\n      sizeLg: \"6\",\n      class: \"login-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IonCard, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IonCardHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IonText, {\n      class: \"textHeader \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }\n    }, \"Cr\\xE9er un nouveau compte\"))), /*#__PURE__*/React.createElement(IonCardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IonList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IonItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 23\n      }\n    }, \" Pseudo\"), /*#__PURE__*/React.createElement(IonInput, {\n      name: \"pseudo\",\n      placeholder: \"Pseudo\",\n      onIonChange: e => setUsernameReg(e.detail.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(IonItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonInput, {\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"E-mail\",\n      onIonChange: e => setEmail(e.detail.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(IonItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonInput, {\n      type: \"password\",\n      placeholder: \"Mot de passe\",\n      onIonChange: e => setPwdReg(e.detail.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(IonRow, {\n      class: \"ion-justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonButton, {\n      class: \"btn-inscrip\",\n      expand: \"block\",\n      color: \"success\",\n      onClick: () => register(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 23\n      }\n    }, \"Inscrivez-vous\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(IonRow, {\n      class: \"ion-justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 23\n      }\n    }, \"Vous avez d\\xE9ja un compte ?\")))))))));\n  } else {\n    return /*#__PURE__*/React.createElement(IonContent, {\n      class: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(IonAlert, {\n      isOpen: isError,\n      onDidDismiss: () => setIsError(false),\n      message: errorMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(IonAlert, {\n      isOpen: alert,\n      onDidDismiss: () => setAlert(false),\n      header: \"Alert\" //ubHeader={\"Inscription avec succès\"}\n      ,\n      message: message,\n      buttons: [\"OK\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(IonGrid, {\n      class: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IonRow, {\n      class: \"ion-justify-content-center ion-align-items-center form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IonCol, {\n      sizeXs: \"10\",\n      sizeSm: \"10\",\n      sizeMd: \"6\",\n      sizeLg: \"6\",\n      class: \"login-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IonCard, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IonCardHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IonText, {\n      class: \"textHeader \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 21\n      }\n    }, \"Connectez-vous pour un mode de vie sain. En toute simplicit\\xE9.\"))), /*#__PURE__*/React.createElement(IonCardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IonList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IonItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonInput, {\n      placeholder: \"pseudo\" // formControlName=\"Pseudo\"\n      ,\n      required: true,\n      onIonChange: e => setUsername(e.detail.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(IonItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonInput, {\n      type: \"password\",\n      placeholder: \"Mot de passe\",\n      onIonChange: e => setPwd(e.detail.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(IonRow, {\n      class: \"ion-justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonCol, {\n      class: \"text-center\",\n      sizeMd: \"12\",\n      sizeXs: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IonButton, {\n      class: \"btn-connec\",\n      expand: \"block\",\n      color: \"success\",\n      onClick: () => connect(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 25\n      }\n    }, \"Connectez-vous\")), /*#__PURE__*/React.createElement(IonCol, {\n      class: \"text-center\",\n      sizeMd: \"12\",\n      sizeXs: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IonButton, {\n      class: \"btn-inscrip\",\n      expand: \"block\",\n      color: \"primary\",\n      fill: \"clear\",\n      onClick: () => inscr(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 25\n      }\n    }, \"Inscription\"))), /*#__PURE__*/React.createElement(IonRow, {\n      class: \"ion-justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 21\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 23\n      }\n    }, \"Mot de passe oubli\\xE9 ?\"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 61\n      }\n    })), /*#__PURE__*/React.createElement(IonRow, {\n      class: \"ion-justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 23\n      }\n    }, \"Contactez-nous ?\"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 56\n      }\n    })))))))));\n  }\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/THINKPAD L480/Desktop/Work/akito/src/components/Login.tsx"],"names":["React","useState","IonCard","IonCardHeader","IonCardContent","IonContent","IonGrid","IonRow","IonCol","IonItem","IonInput","IonList","IonButton","IonText","IonAlert","IonLabel","isPlatform","useForm","axios","Login","email","setEmail","username","setUsername","usernameReg","setUsernameReg","pwd","setPwd","pwdReg","setPwdReg","change","setChange","alert","setAlert","message","setMessage","isError","setIsError","errorMessage","setErrorMessage","initialValues","pseudo","control","handleSubmit","formState","reset","errors","defaultValues","mode","showError","_fieldName","error","color","fontWeight","cnx","inscr","hasProfile","id","token","config","headers","Authorization","localStorage","getItem","get","then","res","data","setItem","window","location","replace","catch","err","console","log","connectRequest","post","password","accessToken","JSON","stringify","roles","response","status","registerRequest","role","connect","register","e","detail","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardContent,\r\n  IonHeader,\r\n  IonContent,\r\n  IonPage,\r\n  IonGrid,\r\n  IonRow,\r\n  IonCol,\r\n  IonItem,\r\n  IonItemDivider,\r\n  IonInput,\r\n  IonList,\r\n  IonButton,\r\n  IonRouterOutlet,\r\n  IonApp,\r\n  IonImg,\r\n  IonNav,\r\n  IonText,\r\n  IonAlert,\r\n  IonLabel,\r\n  isPlatform,\r\n} from \"@ionic/react\";\r\nimport { IonReactRouter } from \"@ionic/react-router\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport Register from \"./Register\";\r\n\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport \"./login-register.css\";\r\nimport axios from \"axios\";\r\nimport { register } from \"../serviceWorker\";\r\nimport { connect } from \"http2\";\r\nimport { createHashHistory } from \"history\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Login: React.FC = () => {\r\n  const [email, setEmail] = useState<String>();\r\n  const [username, setUsername] = useState<String>();\r\n  const [usernameReg, setUsernameReg] = useState<String>();\r\n  const [pwd, setPwd] = useState<String>();\r\n  const [pwdReg, setPwdReg] = useState<String>();\r\n  const [change, setChange] = useState(false);\r\n  const [alert, setAlert] = useState(false);\r\n  const [message, setMessage] = useState(\"Inscription avec succès\");\r\n\r\n  const [isError, setIsError] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  //const history = createHashHistory();\r\n  // validation forms\r\n  let initialValues = {\r\n    pseudo: \"\",\r\n    email: \"\",\r\n  };\r\n\r\n  const { control, handleSubmit, formState, reset, errors } = useForm({\r\n    defaultValues: { ...initialValues },\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  const showError = (_fieldName: string) => {\r\n    let error = (errors as any)[_fieldName];\r\n    return error ? (\r\n      <div style={{ color: \"red\", fontWeight: \"bold\" }}>\r\n        {error.message || \"Field Is Required\"}\r\n      </div>\r\n    ) : null;\r\n  };\r\n\r\n  function cnx() {\r\n    setChange(false);\r\n  }\r\n  function inscr() {\r\n    setChange(true);\r\n  }\r\n\r\n  async function hasProfile(id: BigInteger, token: String) {\r\n    let config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n        \"Access-Control-Allow-Headers\": \"*\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n    };\r\n    await axios\r\n      .get(\r\n        `http://3d621b285293.ngrok.io/api/service/user/hasProfile/${id}`,\r\n        config\r\n      )\r\n      .then((res) => {\r\n        if (res.data) {\r\n          localStorage.setItem(\"fitnessExist\", \"true\");\r\n          window.location.replace(\"/page/Accueil\");\r\n        } else {\r\n          localStorage.setItem(\"fitnessExist\", \"false\");\r\n          if (!isPlatform(\"desktop\")) {\r\n            window.location.replace(\"/stepper\");\r\n          } else {\r\n            window.location.replace(\"page/Profile\");\r\n          }\r\n        }\r\n        // window.location.replace(\"/stepper\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async function connectRequest() {\r\n    await axios\r\n      .post(\r\n        \"http://3d621b285293.ngrok.io/api/auth/signin\",\r\n        {\r\n          username: username,\r\n          password: pwd,\r\n        },\r\n        {\r\n          headers: {\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n            \"Access-Control-Allow-Headers\": \"*\",\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        if (res.data.id) {\r\n          localStorage.setItem(\"token\", res.data.accessToken);\r\n          localStorage.setItem(\"roles\", JSON.stringify(res.data.roles));\r\n          localStorage.setItem(\"id\", res.data.id);\r\n          localStorage.setItem(\"connected\", \"true\");\r\n          localStorage.setItem(\"username\", res.data.username);\r\n          localStorage.setItem(\"email\", res.data.email);\r\n          hasProfile(res.data.id, res.data.accessToken);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        // console.log(err.response.data.message);\r\n        // setMessage(err.response.data.message);\r\n        // setAlert(true);\r\n        if (err.response.status === 401) {\r\n          setErrorMessage(\"Identifiant ou mot de passe erroné\");\r\n        } else if (err.response.status === 500) {\r\n          setErrorMessage(\"Connexion impossible\");\r\n        }\r\n        setIsError(true);\r\n      });\r\n  }\r\n\r\n  async function registerRequest() {\r\n    await axios\r\n      .post(\r\n        \"http://3d621b285293.ngrok.io/api/auth/signup\",\r\n        {\r\n          username: usernameReg,\r\n          password: pwdReg,\r\n          email: email,\r\n          role: [\"ROLE_USER\"],\r\n        },\r\n        {\r\n          headers: {\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n            \"Access-Control-Allow-Headers\": \"Origin, Content-Type, Accept\",\r\n            \"Content-type\": \"application/json\",\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        //setChange(false);\r\n        setMessage(\"Inscription avec succès\");\r\n        setAlert(true);\r\n        //window.location.reload();\r\n      })\r\n      .catch((err) => {\r\n        // console.log(err.response.data);\r\n        // //setMessage(err.response.data.errors[0].defaultMessage);\r\n        // setAlert(true);\r\n        if (err.response.status === 500) {\r\n          setMessage(\"Veuillez remplir les champs correctement\");\r\n        } else {\r\n          setMessage(\"Impossible de s'inscrire\");\r\n        }\r\n        setAlert(true);\r\n      });\r\n  }\r\n\r\n  function connect() {\r\n    connectRequest();\r\n  }\r\n\r\n  function register() {\r\n    registerRequest();\r\n  }\r\n\r\n  if (change) {\r\n    return (\r\n      <IonContent class=\"content\">\r\n        <IonAlert\r\n          isOpen={alert}\r\n          onDidDismiss={() => setAlert(false)}\r\n          header={\"Alert\"}\r\n          //ubHeader={\"Inscription avec succès\"}\r\n          message={message}\r\n          buttons={[\"OK\"]}\r\n        />\r\n        <IonAlert\r\n          isOpen={alert}\r\n          onDidDismiss={() => setAlert(false)}\r\n          header={\"Alert\"}\r\n          //ubHeader={\"Inscription avec succès\"}\r\n          message={message}\r\n          buttons={[\"OK\"]}\r\n        />\r\n        <IonGrid class=\"form\">\r\n          <IonRow class=\"ion-justify-content-center ion-align-items-center form\">\r\n            <IonCol\r\n              sizeXs=\"10\"\r\n              sizeSm=\"10\"\r\n              sizeMd=\"6\"\r\n              sizeLg=\"6\"\r\n              class=\"login-col\"\r\n            >\r\n              <IonCard>\r\n                <IonCardHeader>\r\n                  <IonText class=\"textHeader \">\r\n                    <strong>Créer un nouveau compte</strong>\r\n                  </IonText>\r\n                </IonCardHeader>\r\n                <IonCardContent>\r\n                  <IonList>\r\n                    <IonItem>\r\n                      <IonLabel> Pseudo</IonLabel>\r\n                      <IonInput\r\n                        name=\"pseudo\"\r\n                        placeholder=\"Pseudo\"\r\n                        onIonChange={(e) => setUsernameReg(e.detail.value!)}\r\n                      ></IonInput>\r\n                      {/* <Controller\r\n                              as={IonInput}\r\n                              control={control}\r\n                              onChangeName=\"onIonChange\"\r\n                              onChange={([selected]) => {\r\n                                console.log(\"fullName\", selected.detail.value);\r\n                                return selected.detail.value;\r\n                              }}\r\n                              name=\"pseudo\"\r\n                              rules={{\r\n                                required: true,\r\n                                minLength: { value: 4, message: \"Must be 4 chars long\" }\r\n                              }}\r\n                            /> \r\n                      \r\n                    </IonItem> */}\r\n                      {/* <IonItem>\r\n                      <Controller\r\n                        as={<IonInput />}\r\n                        name=\"pseudo\"\r\n                        control={control}\r\n                        rules={{ required: true ,  minLength: { value: 4, message: \"Must be 4 chars long\" }}}\r\n                        onChangeName=\"onIonChange\"\r\n                        onChange={([e]: any) => {\r\n                          return e.detail.value;\r\n                        }}\r\n                      />*/}\r\n                    </IonItem>\r\n                    <IonItem>\r\n                      <IonInput\r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        placeholder=\"E-mail\"\r\n                        onIonChange={(e) => setEmail(e.detail.value!)}\r\n                      ></IonInput>\r\n                    </IonItem>\r\n                    <IonItem>\r\n                      <IonInput\r\n                        type=\"password\"\r\n                        placeholder=\"Mot de passe\"\r\n                        onIonChange={(e) => setPwdReg(e.detail.value!)}\r\n                      ></IonInput>\r\n                    </IonItem>\r\n                    <br />\r\n                    <IonRow class=\"ion-justify-content-center\">\r\n                      <IonButton\r\n                        class=\"btn-inscrip\"\r\n                        expand=\"block\"\r\n                        color=\"success\"\r\n                        onClick={() => register()}\r\n                      >\r\n                        Inscrivez-vous\r\n                      </IonButton>\r\n                    </IonRow>\r\n                    {/* <IonRow>\r\n                      <IonCol>\r\n                        <IonButton\r\n                          class=\"btn-connec\"\r\n                           \r\n                          expand=\"block\"\r\n                          fill=\"clear\"\r\n                          onClick={() => connect()}\r\n                        >\r\n                          Connexion\r\n                        </IonButton>\r\n                      </IonCol>\r\n                      <IonCol>\r\n                        <IonButton\r\n                          class=\"btn-connec\"\r\n                          \r\n                          expand=\"block\"\r\n                          fill=\"clear\"\r\n                          onClick={() => inscr()}\r\n                        >\r\n                          Inscription\r\n                        </IonButton>\r\n                      </IonCol>\r\n                    </IonRow> */}\r\n                    <br></br>\r\n                    <IonRow class=\"ion-justify-content-center\">\r\n                      <a href=\"/login\">Vous avez déja un compte ?</a>\r\n                    </IonRow>\r\n                  </IonList>\r\n                </IonCardContent>\r\n              </IonCard>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n      </IonContent>\r\n    );\r\n  } else {\r\n    return (\r\n      <IonContent class=\"content\">\r\n        <IonAlert\r\n          isOpen={isError}\r\n          onDidDismiss={() => setIsError(false)}\r\n          message={errorMessage}\r\n        ></IonAlert>\r\n        <IonAlert\r\n          isOpen={alert}\r\n          onDidDismiss={() => setAlert(false)}\r\n          header={\"Alert\"}\r\n          //ubHeader={\"Inscription avec succès\"}\r\n          message={message}\r\n          buttons={[\"OK\"]}\r\n        />\r\n        <IonGrid class=\"form\">\r\n          <IonRow class=\"ion-justify-content-center ion-align-items-center form\">\r\n            <IonCol\r\n              sizeXs=\"10\"\r\n              sizeSm=\"10\"\r\n              sizeMd=\"6\"\r\n              sizeLg=\"6\"\r\n              class=\"login-col\"\r\n            >\r\n              <IonCard>\r\n                <IonCardHeader>\r\n                  <IonText class=\"textHeader \">\r\n                    <strong>\r\n                      Connectez-vous pour un mode de vie sain. En toute\r\n                      simplicité.\r\n                    </strong>\r\n                  </IonText>\r\n                </IonCardHeader>\r\n                <IonCardContent>\r\n                  <IonList>\r\n                    <IonItem>\r\n                      <IonInput\r\n                        placeholder=\"pseudo\"\r\n                        // formControlName=\"Pseudo\"\r\n                        required\r\n                        onIonChange={(e) => setUsername(e.detail.value!)}\r\n                      ></IonInput>\r\n                    </IonItem>\r\n                    <IonItem>\r\n                      <IonInput\r\n                        type=\"password\"\r\n                        placeholder=\"Mot de passe\"\r\n                        onIonChange={(e) => setPwd(e.detail.value!)}\r\n                      ></IonInput>\r\n                    </IonItem>\r\n\r\n                    <IonRow class=\"ion-justify-content-center\">\r\n                      <IonCol class=\"text-center\" sizeMd=\"12\" sizeXs=\"12\">\r\n                        <IonButton\r\n                          class=\"btn-connec\"\r\n                          expand=\"block\"\r\n                          color=\"success\"\r\n                          onClick={() => connect()}\r\n                        >\r\n                          Connectez-vous\r\n                        </IonButton>\r\n                      </IonCol>\r\n\r\n                      <IonCol class=\"text-center\" sizeMd=\"12\" sizeXs=\"12\">\r\n                        <IonButton\r\n                          class=\"btn-inscrip\"\r\n                          expand=\"block\"\r\n                          color=\"primary\"\r\n                          fill=\"clear\"\r\n                          onClick={() => inscr()}\r\n                        >\r\n                          Inscription\r\n                        </IonButton>\r\n                      </IonCol>\r\n                    </IonRow>\r\n\r\n                    <IonRow class=\"ion-justify-content-center\">\r\n                      {\" \"}\r\n                      <br />\r\n                      <a href=\"#\">Mot de passe oublié ?</a> <br />\r\n                    </IonRow>\r\n                    <IonRow class=\"ion-justify-content-center\">\r\n                      <a href=\"#\">Contactez-nous ?</a> <br />\r\n                    </IonRow>\r\n                  </IonList>\r\n                </IonCardContent>\r\n              </IonCard>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n      </IonContent>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}